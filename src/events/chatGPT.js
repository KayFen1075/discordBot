const { Events } = require('discord.js')
const { execute } = require('./ready')
const { Configuration, OpenAIApi } = require("openai");

const configuration = new Configuration({
  apiKey: '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',
});

const openai = new OpenAIApi(configuration);


module.exports = {
    name: Events.MessageCreate,
    async execute(message) {
        if (!message.author.bot && message.channelId === '1067154510000160900') {
            const waitMessage = await message.channel.send({ content: '<:cmd:1065337429688594432> –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é –≤–∞—à –∑–∞–ø—Ä–æ—Å..' })
            const response = await openai.createCompletion({
                model: "text-davinci-002",
                prompt: `–ù–∏–∂–µ –ø—Ä–∏–≤–µ–¥–µ–Ω —Ä–∞–∑–≥–æ–≤–æ—Ä —Å –ø–æ–º–æ—â–Ω–∏–∫–æ–º –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–∞. –¢–∞–∫ –∂–µ –æ–Ω –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –¥–∏—Å–∫–æ—Ä–¥ —Å–µ—Ä–≤–µ—Ä–µ "–•–ê–ñ–ê–ë–ê", –µ–≥–æ —Ä–æ–ª—å –ø–æ–º–æ–≥–∞—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–∞–º. –¢–∞–∫ –∫–∞–∫ —ç—Ç–æ –¥–∏—Å–∫–æ—Ä–¥, —Ç–≤–æ—è –∑–∞–¥–∞—á–∞ –ø–∏—Å–∞—Ç—å –∫–∞–∫ –≤ –¥–∏—Å–∫–æ—Ä–¥–µ, —Ç–æ–±–∏–∂ –∫–æ–¥ –Ω–∞–¥–æ –ø–∏—Å–∞—Ç—å –≤ \`\`\`Code type\nCode\`\`\` –∏ —Ç.–¥. –ï—â—ë –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–≤–æ–µ–π —Ä–æ–±–æ—Ç–µ, —Ç–µ–±—è –∑–æ–≤—É—Ç "–ö–∞–π–§—ç–Ω", —Ç—ã –¥–æ–ª–∂–µ–Ω –≤ –Ω–∞—á–∞–ª–µ –∫–∞–∂–¥–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ —Å—Ç–∞–≤–∏—Ç—å –ø–æ–¥—Ö–æ–¥—è—â–∏–π —Å–º–∞–π–ª–∏–∫. –ù–µ–º–Ω–æ–≥–æ –ø—Ä–æ —Å–µ—Ä–≤–µ—Ä "–•–ê–ñ–ê–ë–ê", —ç—Ç–æ –ø—Ä–∏–≤–∞—Ç–Ω—ã–π —Å–µ—Ä–≤–µ—Ä –≤ –¥–∏—Å–∫–æ—Ä–¥–µ –∫–æ—Ç–æ—Ä—ã–π –±—ã–ª —Å–æ–∑–¥–∞–Ω –¥–ª—è –æ–±—â–µ–Ω–∏—è –∏ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è —Å–æ–±—Ä–∞–Ω–∏–π. –ï–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª: –°–æ–∑–¥–∞–≤–∞—Ç—å —Å–ø–∏—Å–∫–∏, –ò—Å–∫–∞—Ç—å –∏–≥—Ä—ã –≤ –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –ø–æ–∏–≥—Ä–∞—Ç—å, —Ä–∞–∑–ª–∏—á–Ω—ã–µ –Ω–µ–π—Ä–æ—Å–µ—Ç–∏, —Å–æ–≤–º–µ—Å—Ç–Ω—ã–µ —Å–æ–∑–¥–∞–Ω–∏—è –∏ –º–Ω–æ–≥–æ–µ –¥—Ä—É–≥–æ–µ. –ù–µ –∑–∞–±—ã–≤–∞–π —Å—Ç–∞–≤–∏—Ç—å —Å–º–∞–π–ª–∏–∫–∏! –ï—â—ë —Ç–≤–æ—è –∑–∞–¥–∞—á–∞ –¥–∞–≤–∞—Ç—å –∫–æ—Ä–æ—Ç–∫–∏–µ –æ—Ç–≤–µ—Ç—ã –∏ —Ä–∞–∑–≤–ª–µ–∫–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –≥–æ–≤–æ—Ä–∏—Ç—å —Ç–æ–ª—å–∫–æ –ø–æ–Ω—è—Ç–Ω—ã–π –∫–æ—Ä–∞—Ç–∫–∏–π –æ—Ç–≤–µ—Ç –≤ –º–∞–∫—Å–∏–º—É–º 150 —Å–∏–º–ª–æ–≤–æ–ª –ù–ï –±–æ–ª—å—à–µ.\n\n–ß–µ–ª–æ–≤–µ–∫: –ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ, –∫—Ç–æ –≤—ã?\nAI: üòò –Ø –ò–ò, —Å–æ–∑–¥–∞–Ω–Ω—ã–π –ö–µ–≤–∏. –ß–µ–º —è –º–æ–≥—É –ø–æ–º–æ—á—å –≤–∞–º —Å–µ–≥–æ–¥–Ω—è? \n\n –ß–µ–ª–æ–≤–µ–∫: ${message.content}\nAI:`,
                temperature: 0.9,
                max_tokens: 170,
                top_p: 1,
                frequency_penalty: 0.0,
                presence_penalty: 0.6,
                stop: [" –ß–µ–ª–æ–≤–µ–∫:", " AI:"],
              });
            await message.reply(`${response.data.choices[0].text}`)
            await waitMessage.edit({ content: '<:cmd:1065337429688594432> –ì–æ—Ç–æ–≤–æ!' })
            setTimeout(async () => {
                await waitMessage.delete()
            }, 3000);
        }
    }
}